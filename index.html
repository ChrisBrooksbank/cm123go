<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Chelmsford Bus Times - cm123go</title>
        <link rel="icon" type="image/svg+xml" href="/icons/icon.svg" />
        <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png" />
        <link rel="icon" type="image/png" sizes="512x512" href="/icons/icon-512.png" />
        <meta name="theme-color" content="#5C6B73" />
        <link rel="apple-touch-icon" href="/icons/icon-192.png" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
            rel="stylesheet"
        />
        <style>
            :root {
                /* Primary */
                --color-primary: #5c6b73;
                --color-primary-hover: #4a565c;
                --color-accent: #c9a962;

                /* Secondary */
                --color-train: #708f7a;
                --color-train-light: #e8f0ea;
                --color-link: #6b8fa3;
                --color-link-hover: #5a7a8c;

                /* Neutrals */
                --color-bg: #f7f5f2;
                --color-card: #f8fafb;
                --color-border: #eef1f3;
                --color-border-strong: #d8dfe3;
                --color-text-muted: #5f6d78;
                --color-text: #5a6872;
                --color-text-strong: #2d3439;

                /* Semantic */
                --color-realtime: #4a7c59;
                --color-realtime-bg: #e8f0ea;
                --color-scheduled: #6366a1;
                --color-scheduled-bg: #ededf5;
                --color-delayed: #b8860b;
                --color-cancelled: #a04040;
                --color-cancelled-bg: #f5e8e8;
                --color-favorite: #b8860b;
                --color-favorite-bg: #fbf5e6;
                --color-success: #4a7c59;
                --color-success-bg: #e8f0ea;

                /* Shadows */
                --shadow-sm: 0 1px 2px rgba(45, 52, 57, 0.05);
                --shadow-md: 0 2px 8px rgba(45, 52, 57, 0.08);

                /* Radii */
                --radius-sm: 4px;
                --radius-md: 6px;
                --radius-lg: 8px;
            }
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            body {
                font-family:
                    'Inter',
                    system-ui,
                    -apple-system,
                    BlinkMacSystemFont,
                    'Segoe UI',
                    Roboto,
                    sans-serif;
                min-height: 100vh;
                display: flex;
                flex-direction: column;
                background: var(--color-bg);
                color: var(--color-text);
            }
            header {
                background: var(--color-primary);
                color: white;
                padding: 1rem 2rem;
                box-shadow: var(--shadow-md);
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            .install-banner {
                border-left: 4px solid var(--color-train);
                background: linear-gradient(to right, var(--color-train-light), var(--color-card));
            }
            .install-content {
                display: flex;
                align-items: flex-start;
                gap: 1rem;
                margin-bottom: 1rem;
            }
            .install-icon {
                font-size: 2rem;
                line-height: 1;
            }
            .install-text h3 {
                font-size: 1.1rem;
                font-weight: 600;
                color: var(--color-text-strong);
                margin-bottom: 0.25rem;
            }
            .install-text p {
                font-size: 0.9rem;
                color: var(--color-text);
                margin: 0;
            }
            .install-actions {
                display: flex;
                gap: 0.75rem;
            }
            .install-button-primary {
                background: var(--color-primary);
                color: white;
                border: none;
                padding: 0.625rem 1.25rem;
                border-radius: var(--radius-md);
                font-weight: 600;
                cursor: pointer;
                font-size: 0.9rem;
                transition: background-color 0.15s ease;
            }
            .install-button-primary:hover {
                background: var(--color-primary-hover);
            }
            .install-button-dismiss {
                background: transparent;
                color: var(--color-text);
                border: 1px solid var(--color-border-strong);
                padding: 0.625rem 1rem;
                border-radius: var(--radius-md);
                font-weight: 500;
                cursor: pointer;
                font-size: 0.9rem;
                transition: all 0.15s ease;
            }
            .install-button-dismiss:hover {
                background: var(--color-border);
            }
            header h1 {
                font-size: 1.5rem;
                font-weight: 600;
            }
            main {
                flex: 1;
                padding: 2rem;
                max-width: 800px;
                margin: 0 auto;
                width: 100%;
            }
            .card {
                background: var(--color-card);
                border-radius: var(--radius-lg);
                padding: 1.5rem;
                box-shadow: var(--shadow-sm);
                border: 1px solid var(--color-border);
                margin-bottom: 1rem;
            }
            .card h2 {
                font-size: 1.25rem;
                margin-bottom: 0.5rem;
                color: var(--color-text-strong);
            }
            .card p {
                color: var(--color-text);
                line-height: 1.6;
            }
            .status {
                display: inline-block;
                padding: 0.25rem 0.75rem;
                border-radius: 9999px;
                font-size: 0.875rem;
                font-weight: 500;
                background: var(--color-success-bg);
                color: var(--color-success);
            }
            .location-container {
                display: flex;
                align-items: center;
                gap: 0.75rem;
                flex-wrap: wrap;
            }
            #postcode-display {
                margin: 0;
            }
            #change-location-btn {
                padding: 0.375rem 0.75rem;
                font-size: 0.875rem;
                font-weight: 500;
                background: var(--color-primary);
                color: white;
                border: none;
                border-radius: var(--radius-sm);
                cursor: pointer;
                transition: background-color 0.15s ease;
            }
            #change-location-btn:hover {
                background: var(--color-primary-hover, #1d4ed8);
            }
            #change-location-btn:focus-visible {
                outline: 2px solid var(--color-primary);
                outline-offset: 2px;
            }
            .distance {
                color: var(--color-text-muted);
                font-size: 0.875rem;
                margin-bottom: 1rem;
            }
            .departure-row {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0.75rem 0;
                border-bottom: 1px solid var(--color-border);
            }
            .departure-row:last-child {
                border-bottom: none;
            }
            .line-badge {
                background: var(--color-primary);
                color: white;
                padding: 0.25rem 0.5rem;
                border-radius: var(--radius-sm);
                font-weight: 600;
                min-width: 3rem;
                text-align: center;
                font-size: 0.875rem;
            }
            .destination {
                flex: 1;
                margin-left: 1rem;
                font-size: 0.9rem;
                color: var(--color-text-strong);
            }
            .time-container {
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }
            .time {
                font-weight: 600;
                color: var(--color-realtime);
                min-width: 3.5rem;
                text-align: right;
            }
            .time.delayed {
                color: var(--color-delayed);
            }
            .source-badge {
                font-size: 0.75rem;
                font-weight: 600;
                padding: 0.2rem 0.4rem;
                border-radius: var(--radius-sm);
                text-transform: uppercase;
            }
            .source-badge.realtime {
                background: var(--color-realtime-bg);
                color: var(--color-realtime);
            }
            .source-badge.scheduled {
                background: var(--color-scheduled-bg);
                color: var(--color-scheduled);
            }
            .timestamp {
                color: var(--color-text-muted);
                font-size: 0.75rem;
                margin-top: 0.75rem;
            }
            .refresh-button {
                margin-top: 1rem;
                padding: 0.5rem 1rem;
                background: var(--color-primary);
                color: white;
                border: none;
                border-radius: var(--radius-md);
                cursor: pointer;
                font-size: 0.875rem;
                font-weight: 500;
                transition:
                    background-color 0.15s ease,
                    transform 0.1s ease;
            }
            .refresh-button:hover {
                background: var(--color-primary-hover);
            }
            .refresh-button:active {
                transform: scale(0.98);
            }
            .refresh-button:disabled {
                background: var(--color-text-muted);
                cursor: not-allowed;
                transform: none;
            }
            .error-message {
                color: var(--color-cancelled);
                background: var(--color-cancelled-bg);
                padding: 1rem;
                border-radius: var(--radius-md);
            }
            .no-departures {
                color: var(--color-text-muted);
                font-style: italic;
                padding: 1rem 0;
            }
            .bearing-badge {
                display: inline-block;
                background: var(--color-text-muted);
                color: white;
                padding: 0.15rem 0.4rem;
                border-radius: var(--radius-sm);
                font-size: 0.7rem;
                font-weight: 600;
                margin-left: 0.5rem;
                vertical-align: middle;
            }
            .stop-header {
                display: flex;
                align-items: center;
                flex-wrap: wrap;
                gap: 0.25rem;
            }
            .station-badge {
                display: inline-block;
                background: var(--color-train);
                color: white;
                padding: 0.15rem 0.4rem;
                border-radius: var(--radius-sm);
                font-size: 0.75rem;
                font-weight: 600;
                margin-left: 0.5rem;
                vertical-align: middle;
            }
            .train-station-card {
                border-left: 4px solid var(--color-train);
            }
            .train-departure-row {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0.75rem 0;
                border-bottom: 1px solid var(--color-border);
            }
            .train-departure-row:last-child {
                border-bottom: none;
            }
            .platform-badge {
                background: var(--color-border);
                color: var(--color-text-strong);
                padding: 0.25rem 0.5rem;
                border-radius: var(--radius-sm);
                font-weight: 600;
                font-size: 0.75rem;
                min-width: 3.5rem;
                text-align: center;
            }
            .status-badge {
                font-size: 0.75rem;
                font-weight: 600;
                padding: 0.2rem 0.4rem;
                border-radius: var(--radius-sm);
                text-transform: uppercase;
            }
            .status-badge.cancelled {
                background: var(--color-cancelled-bg);
                color: var(--color-cancelled);
            }
            .time.cancelled {
                color: var(--color-cancelled);
                text-decoration: line-through;
            }
            .directions-link {
                display: inline-flex;
                align-items: center;
                gap: 0.25rem;
                margin-left: 0.5rem;
                padding: 0.5rem 0.75rem;
                min-height: 44px;
                min-width: 44px;
                background: var(--color-border);
                color: var(--color-link);
                text-decoration: none;
                font-size: 0.875rem;
                font-weight: 500;
                border-radius: var(--radius-md);
                border: 1px solid var(--color-border-strong);
                vertical-align: middle;
                transition: all 0.15s ease;
            }
            .directions-link:hover {
                background: var(--color-border-strong);
                color: var(--color-link-hover);
            }
            .directions-link:active {
                background: var(--color-border-strong);
            }
            footer {
                text-align: center;
                padding: 1rem;
                color: var(--color-text-muted);
                font-size: 0.875rem;
            }
            /* Favorite button - subtle text style */
            .favorite-btn {
                background: transparent;
                border: 1px solid var(--color-border-strong);
                border-radius: var(--radius-sm);
                font-size: 0.8rem;
                color: var(--color-text-muted);
                cursor: pointer;
                padding: 0.5rem 0.75rem;
                min-height: 44px;
                min-width: 44px;
                margin-left: auto;
                transition: all 0.15s ease;
            }
            .favorite-btn:hover {
                background: var(--color-border);
                border-color: var(--color-text-muted);
            }
            .favorite-btn.active {
                background: var(--color-favorite-bg);
                border-color: var(--color-favorite);
                color: var(--color-favorite);
            }
            /* Show more stops link */
            .show-more-container {
                text-align: center;
                margin: 1rem 0;
            }
            .show-more-btn {
                background: transparent;
                border: 1px solid var(--color-border-strong);
                color: var(--color-text);
                padding: 0.75rem 1.5rem;
                border-radius: var(--radius-md);
                cursor: pointer;
                font-size: 0.875rem;
                transition: all 0.15s ease;
            }
            .show-more-btn:hover {
                background: var(--color-border);
                border-color: var(--color-text-muted);
                color: var(--color-text-strong);
            }
            .show-more-btn:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }

            /* Accessibility: Focus styles for keyboard navigation */
            :focus-visible {
                outline: 3px solid var(--color-link);
                outline-offset: 2px;
            }
            button:focus-visible,
            a:focus-visible,
            input:focus-visible {
                outline: 3px solid var(--color-link);
                outline-offset: 2px;
            }
            .favorite-btn:focus-visible {
                outline-offset: 1px;
            }

            /* Accessibility: Skip navigation link */
            .skip-link {
                position: absolute;
                top: -100px;
                left: 0;
                background: var(--color-primary);
                color: white;
                padding: 0.75rem 1rem;
                z-index: 1000;
                font-weight: 600;
                text-decoration: none;
                border-radius: 0 0 var(--radius-md) 0;
            }
            .skip-link:focus {
                top: 0;
            }

            /* Accessibility: Visually hidden but available to screen readers */
            .visually-hidden {
                position: absolute;
                width: 1px;
                height: 1px;
                padding: 0;
                margin: -1px;
                overflow: hidden;
                clip: rect(0, 0, 0, 0);
                white-space: nowrap;
                border: 0;
            }

            /* Accessibility: Reduced motion preference */
            @media (prefers-reduced-motion: reduce) {
                *,
                *::before,
                *::after {
                    animation-duration: 0.01ms !important;
                    animation-iteration-count: 1 !important;
                    transition-duration: 0.01ms !important;
                }
            }

            /* Text size settings - applied to html so rem units scale */
            html {
                font-size: 18px;
            }
            html.text-size-large {
                font-size: 22px;
            }
            html.text-size-xl {
                font-size: 28px;
            }

            /* Settings controls in header */
            .header-controls {
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }
            .text-size-toggle {
                display: flex;
                gap: 0.25rem;
            }
            .text-size-btn {
                min-width: 36px;
                min-height: 36px;
                padding: 0.25rem 0.5rem;
                background: rgba(255, 255, 255, 0.2);
                color: white;
                border: 1px solid rgba(255, 255, 255, 0.3);
                border-radius: var(--radius-sm);
                font-weight: 600;
                cursor: pointer;
                transition: all 0.15s ease;
            }
            .text-size-btn:hover {
                background: rgba(255, 255, 255, 0.3);
            }
            .text-size-btn.active {
                background: var(--color-accent);
                border-color: var(--color-accent);
                color: var(--color-text-strong);
            }
            .settings-btn {
                min-width: 36px;
                min-height: 36px;
                padding: 0.25rem 0.5rem;
                background: rgba(255, 255, 255, 0.2);
                color: white;
                border: 1px solid rgba(255, 255, 255, 0.3);
                border-radius: var(--radius-sm);
                font-weight: 600;
                cursor: pointer;
                transition: all 0.15s ease;
            }
            .settings-btn:hover {
                background: rgba(255, 255, 255, 0.3);
            }
            .settings-btn.active {
                background: var(--color-accent);
                border-color: var(--color-accent);
                color: var(--color-text-strong);
            }

            /* High contrast mode */
            body.high-contrast {
                --color-bg: #ffffff;
                --color-card: #ffffff;
                --color-text: #000000;
                --color-text-strong: #000000;
                --color-text-muted: #333333;
                --color-border: #666666;
                --color-border-strong: #000000;
            }
            body.high-contrast .card {
                border: 3px solid #000000;
                box-shadow: none;
            }
            body.high-contrast a {
                text-decoration: underline;
                color: #0000cc;
            }
            body.high-contrast .source-badge {
                border: 2px solid currentColor;
                font-weight: 700;
            }
            body.high-contrast .source-badge.realtime {
                background: #000000;
                color: #ffffff;
            }
            body.high-contrast .source-badge.scheduled {
                background: #ffffff;
                color: #000000;
            }
            body.high-contrast .platform-badge {
                background: #ffffff;
                border: 2px solid #000000;
            }
            body.high-contrast .line-badge {
                border: 2px solid #000000;
                font-weight: 700;
            }
            body.high-contrast .station-badge {
                border: 2px solid #000000;
            }
            body.high-contrast .favorite-btn {
                border: 2px solid #000000;
            }
            body.high-contrast .favorite-btn.active {
                background: #000000;
                color: #ffffff;
            }
            body.high-contrast .directions-link {
                border: 2px solid #000000;
                background: #ffffff;
            }
            body.high-contrast .time {
                font-weight: 700;
                font-size: 1.1em;
            }
            body.high-contrast .departure-row {
                border-bottom: 2px solid #000000;
            }
            body.high-contrast header {
                background: #000000;
            }
            body.high-contrast #change-location-btn {
                background: #000000;
                border: 2px solid #000000;
            }
            body.high-contrast .show-more-btn {
                border: 2px solid #000000;
            }
            body.high-contrast .refresh-button {
                border: 2px solid #000000;
            }

            /* Larger touch targets */
            .favorite-btn,
            .directions-link,
            .show-more-btn,
            .refresh-button,
            #change-location-btn {
                min-height: 48px;
                min-width: 48px;
            }
            .departure-row {
                padding: 1rem 0;
            }

            /* Loading spinner */
            .spinner {
                display: inline-block;
                width: 18px;
                height: 18px;
                border: 3px solid var(--color-border);
                border-top-color: var(--color-primary);
                border-radius: 50%;
                animation: spin 1s linear infinite;
                vertical-align: middle;
                margin-right: 0.5rem;
            }
            @keyframes spin {
                to {
                    transform: rotate(360deg);
                }
            }

            /* Help modal */
            .help-modal-overlay {
                position: fixed;
                inset: 0;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
                padding: 1rem;
            }
            .help-modal-overlay[hidden] {
                display: none;
            }
            .help-modal {
                background: var(--color-card);
                border-radius: var(--radius-lg);
                padding: 2rem;
                max-width: 400px;
                width: 100%;
                box-shadow: var(--shadow-md);
            }
            .help-modal h2 {
                font-size: 1.5rem;
                margin-bottom: 1rem;
                color: var(--color-text-strong);
            }
            .help-modal ul {
                list-style: disc;
                padding-left: 1.5rem;
                margin-bottom: 1.5rem;
            }
            .help-modal li {
                margin-bottom: 0.75rem;
                line-height: 1.5;
            }
            .help-modal-close {
                width: 100%;
                padding: 1rem;
                font-size: 1.1rem;
                font-weight: 600;
                background: var(--color-primary);
                color: white;
                border: none;
                border-radius: var(--radius-md);
                cursor: pointer;
                min-height: 56px;
            }
            .help-modal-close:hover {
                background: var(--color-primary-hover);
            }

            /* Mobile responsive styles */
            @media (max-width: 480px) {
                header {
                    flex-wrap: wrap;
                    gap: 0.5rem;
                    padding: 0.75rem 1rem;
                }
                header h1 {
                    font-size: 1.25rem;
                }
                main {
                    padding: 1rem;
                }
                .card {
                    padding: 1rem;
                }
                .card h2 {
                    font-size: 1.1rem;
                }
                .location-container {
                    gap: 0.5rem;
                }
                .departure-row {
                    flex-wrap: wrap;
                    gap: 0.5rem;
                    padding: 0.75rem 0;
                }
                .destination {
                    flex-basis: 100%;
                    margin-left: 0;
                    order: -1;
                }
                .line-badge {
                    min-width: 2.5rem;
                }
                .time-container {
                    margin-left: auto;
                }
                .stop-header {
                    gap: 0.5rem;
                }
                .favorite-btn {
                    padding: 0.4rem 0.6rem;
                    font-size: 0.75rem;
                }
                .directions-link {
                    padding: 0.4rem 0.6rem;
                    font-size: 0.8rem;
                }
            }

            /* Large text specific fixes - use fixed pixel sizes for controls */
            html.text-size-large header,
            html.text-size-xl header {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            html.text-size-large .text-size-btn,
            html.text-size-xl .text-size-btn,
            html.text-size-large .settings-btn,
            html.text-size-xl .settings-btn {
                font-size: 14px;
                padding: 6px 10px;
                min-width: 40px;
                min-height: 40px;
            }
            html.text-size-large main,
            html.text-size-xl main {
                padding: 1rem;
            }
            html.text-size-large .card,
            html.text-size-xl .card {
                padding: 1rem;
            }
            html.text-size-xl header h1 {
                font-size: 1.1rem;
            }
            html.text-size-xl .departure-row {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            html.text-size-xl .destination {
                flex-basis: 100%;
                margin-left: 0;
                order: -1;
            }
            html.text-size-xl .time-container {
                margin-left: auto;
            }
        </style>
    </head>
    <body>
        <a href="#departures-container" class="skip-link">Skip to departures</a>
        <header>
            <h1>CM123Go</h1>
            <div class="header-controls">
                <div class="text-size-toggle" role="group" aria-label="Text size">
                    <button
                        class="text-size-btn active"
                        data-size="normal"
                        aria-label="Normal text size"
                        aria-pressed="true"
                    >
                        A
                    </button>
                    <button
                        class="text-size-btn"
                        data-size="large"
                        aria-label="Large text size"
                        aria-pressed="false"
                    >
                        A+
                    </button>
                    <button
                        class="text-size-btn"
                        data-size="xl"
                        aria-label="Extra large text size"
                        aria-pressed="false"
                    >
                        A++
                    </button>
                </div>
                <button
                    id="contrast-btn"
                    class="settings-btn"
                    aria-label="Toggle high contrast mode"
                    aria-pressed="false"
                    title="High contrast"
                >
                    HC
                </button>
                <button
                    id="help-btn"
                    class="settings-btn"
                    aria-label="Help and information"
                    title="Help"
                >
                    ?
                </button>
            </div>
        </header>
        <main id="app">
            <div class="card">
                <h2>Your Location</h2>
                <div class="location-container">
                    <p id="postcode-display">
                        <span class="spinner" aria-hidden="true"></span>Finding where you are...
                    </p>
                    <button id="change-location-btn" type="button" aria-label="Change location">
                        Change
                    </button>
                </div>
                <form
                    id="postcode-form"
                    style="display: none; margin-top: 0.75rem"
                    aria-describedby="postcode-form-desc"
                >
                    <p id="postcode-form-desc" class="visually-hidden">
                        Enter your UK postcode to find nearby bus stops
                    </p>
                    <label
                        for="postcode-input"
                        style="
                            display: block;
                            font-size: 0.875rem;
                            margin-bottom: 0.25rem;
                            color: var(--color-text-muted);
                        "
                        >Enter UK postcode</label
                    >
                    <div style="display: flex; gap: 0.5rem">
                        <input
                            type="text"
                            id="postcode-input"
                            placeholder="e.g. CM1 1AB"
                            aria-describedby="postcode-error"
                            aria-required="true"
                            aria-invalid="false"
                            autocomplete="postal-code"
                            autocorrect="off"
                            autocapitalize="characters"
                            spellcheck="false"
                            maxlength="8"
                            pattern="[A-Za-z]{1,2}[0-9][0-9A-Za-z]?\s?[0-9][A-Za-z]{2}"
                            style="
                                flex: 1;
                                padding: 0.5rem;
                                border: 1px solid var(--color-border-strong);
                                border-radius: var(--radius-md);
                                font-size: 1rem;
                            "
                        />
                        <button type="submit" class="refresh-button" aria-label="Find nearby stops">
                            Find stops
                        </button>
                    </div>
                    <p
                        id="postcode-error"
                        role="alert"
                        aria-live="assertive"
                        style="
                            color: var(--color-error, #dc2626);
                            font-size: 0.875rem;
                            margin-top: 0.5rem;
                            display: none;
                        "
                    ></p>
                </form>
            </div>

            <div id="install-banner" class="card install-banner" hidden>
                <div class="install-content">
                    <div class="install-text">
                        <h3>Install this app</h3>
                        <p>Add to your home screen for quick access when you need bus times</p>
                    </div>
                </div>
                <div class="install-actions">
                    <button id="install-btn" class="install-button-primary">Install App</button>
                    <button id="install-dismiss" class="install-button-dismiss">Not now</button>
                </div>
            </div>

            <div
                id="departures-container"
                aria-live="polite"
                aria-atomic="false"
                tabindex="-1"
            ></div>

            <!-- Hidden live region for status announcements -->
            <div
                id="status-announcer"
                class="visually-hidden"
                role="status"
                aria-live="polite"
                aria-atomic="true"
            ></div>

            <div id="refresh-container" style="display: none; text-align: center; margin-top: 1rem">
                <button
                    id="refresh-btn"
                    class="refresh-button"
                    aria-label="Update all departure times"
                >
                    Update times
                </button>
            </div>

            <div
                class="card"
                id="error-card"
                style="display: none"
                role="alert"
                aria-live="assertive"
            >
                <p id="error-message" class="error-message"></p>
            </div>
        </main>

        <!-- Help Modal -->
        <div
            id="help-modal"
            class="help-modal-overlay"
            hidden
            role="dialog"
            aria-modal="true"
            aria-labelledby="help-title"
        >
            <div class="help-modal">
                <h2 id="help-title">How to use this app</h2>
                <ul>
                    <li>
                        <strong>See departure times:</strong> The app shows buses and trains near
                        you
                    </li>
                    <li>
                        <strong>Save favourites:</strong> Tap "Favourite" on any stop to save it for
                        quick access
                    </li>
                    <li>
                        <strong>Get directions:</strong> Tap "Directions" to see how to walk to a
                        bus stop
                    </li>
                    <li>
                        <strong>Change location:</strong> Tap "Change" to enter a different postcode
                    </li>
                    <li><strong>Text size:</strong> Use A, A+, A++ buttons to make text bigger</li>
                    <li><strong>High contrast:</strong> Tap "HC" for easier-to-read colours</li>
                </ul>
                <button id="help-close" class="help-modal-close">Got it</button>
            </div>
        </div>

        <footer>Bus and train times for Chelmsford, UK</footer>
        <script type="module" src="/src/main.ts"></script>
    </body>
</html>
